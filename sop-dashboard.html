<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8" />
    <title>SASV WORKSPACE | SOP Dashboard</title>
    <link rel="stylesheet" href="public/shared/css/style.css" />
    <link rel="stylesheet" href="css/sop-dashboard.css" />
  </head>
  <body data-theme="system">
    <header>
      <h1>SOP Dashboard</h1>
      <button id="homeBtn" class="btn" type="button">HOME</button>
    </header>

    <!-- Filters -->
    <section class="panel">
      <div class="toolbar">
        <!-- Series -->
        <div class="field">
          <label for="filterSeries">Series</label>
          <select id="filterSeries">
            <option value="">All Series</option>
          </select>
        </div>

        <!-- Activity -->
        <div class="field">
          <label for="filterActivity">Activity Kind</label>
          <select id="filterActivity">
            <option value="">All Activities</option>
          </select>
        </div>

        <!-- Status -->
        <div class="field">
          <label for="filterStatus">Status</label>
          <select id="filterStatus">
            <option value="">Any Status</option>
            <option value="draft">Draft</option>
            <option value="under_review">Under Review</option>
            <option value="approved">Approved</option>
            <option value="active">Active</option>
            <option value="obsolete">Obsolete</option>
          </select>
        </div>

        <!-- Search -->
        <div class="field" style="min-width: 280px">
          <label for="filterSearch">Search (No./Title)</label>
          <input
            id="filterSearch"
            type="text"
            placeholder="MF.014-013 or title…"
          />
        </div>

        <!-- Checkboxes grouped so they stay on one line -->
        <div class="field field--checkbox-row">
          <label class="inline" for="toggleGroup">
            <input type="checkbox" id="toggleGroup" checked />
            Group by SOP
          </label>
          <label class="inline" for="includeObsolete">
            <input type="checkbox" id="includeObsolete" />
            Include obsolete
          </label>
        </div>

        <!-- Spacer pushes New button to the far right -->
        <div id="toolbarSpacer" style="flex: 1"></div>

        <!-- New SOP -->
        <div class="field" style="min-width: auto">
          <label style="visibility: hidden">New</label>
          <button id="btnNew" class="sop-btn sop-btn--blue" type="button">
            + New SOP
          </button>
        </div>
      </div>
    </section>

    <!-- Results -->
    <section class="panel">
      <div class="count" id="resultCount">Loading…</div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th style="width: 120px">SOP No.</th>
              <th>Title</th>
              <th style="width: 80px">Series</th>
              <th>Activity</th>
              <th style="width: 60px">Ver</th>
              <th style="width: 110px">Status</th>
              <th style="width: 110px">Created</th>
              <th style="width: 150px">Created by</th>
              <th style="width: 110px">Updated</th>
              <th style="width: 150px">Updated by</th>
              <th style="width: 60px">Actions</th>
            </tr>
          </thead>
          <tbody id="rows">
            <tr>
              <td colspan="11" class="empty">Loading…</td>
            </tr>
          </tbody>
        </table>

        <div class="pagination">
          <button class="btn btn--blue" id="prevPage" type="button">
            Prev
          </button>
          <span id="pageInfo">Page 1</span>
          <button class="btn btn--blue" id="nextPage" type="button">
            Next
          </button>
        </div>
      </div>
    </section>

    <script type="module" src="public/shared/js/supabaseClient.js"></script>
    <script type="module" src="js/sop-dashboard.js"></script>
  </body>
</html>
